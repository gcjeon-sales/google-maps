<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>차박 스팟 파인더</title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- 헤더 -->
    <header class="header">
      <h1>🚗 차박 스팟 파인더</h1>
      <p>Google My Maps 위치 기반 차박 정보 검색</p>
      <button id="settingsBtn" class="btn-icon" title="설정">⚙️</button>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main-content">
      <!-- 좌측 패널 -->
      <aside class="left-panel">
        <!-- 데이터 업로드 섹션 -->
        <section class="panel-section">
          <h3>📍 내 장소 불러오기</h3>
          <div class="upload-area">
            <div class="upload-method">
              <label>KML/KMZ 파일 업로드</label>
              <input type="file" id="kmlFileInput" accept=".kml,.kmz">
            </div>
            <div class="divider">또는</div>
            <div class="upload-method">
              <label>Google My Maps URL</label>
              <input type="text" id="kmlUrlInput" placeholder="https://www.google.com/maps/d/...">
              <button id="loadUrlBtn" class="btn-primary">불러오기</button>
            </div>
          </div>
          <div id="placesCount" class="info-badge hidden">0개 장소 로드됨</div>
        </section>

        <!-- 화장실 데이터 업로드 -->
        <section class="panel-section">
          <h3>🚽 공중화장실 데이터</h3>
          <div class="upload-area">
            <label>CSV/Excel 파일 업로드</label>
            <input type="file" id="toiletFileInput" accept=".csv,.xlsx,.xls">
            <p class="help-text">공공데이터포털에서 다운로드한 파일</p>
          </div>
          <div id="toiletCount" class="info-badge hidden">0개 화장실 데이터 로드됨</div>
        </section>

        <!-- 장소 목록 -->
        <section class="panel-section places-list-section">
          <h3>📋 내 장소 목록</h3>
          <input type="text" id="placeSearch" placeholder="장소 검색..." class="search-input">
          <div id="placesList" class="places-list">
            <p class="empty-message">장소 데이터를 불러와주세요</p>
          </div>
        </section>
      </aside>

      <!-- 지도 영역 -->
      <div class="map-container">
        <div id="map"></div>
      </div>

      <!-- 우측 패널 (상세 정보) -->
      <aside class="right-panel" id="detailPanel">
        <div class="detail-header">
          <h2 id="selectedPlaceName">장소를 선택하세요</h2>
          <p id="selectedPlaceDesc"></p>
        </div>

        <!-- 탭 메뉴 -->
        <div class="tabs">
          <button class="tab-btn active" data-tab="toilet">🚽 화장실</button>
          <button class="tab-btn" data-tab="review">📝 후기</button>
          <button class="tab-btn" data-tab="info">ℹ️ 정보</button>
        </div>

        <!-- 화장실 탭 -->
        <div id="toiletTab" class="tab-content active">
          <div class="radius-control">
            <label>검색 반경</label>
            <select id="toiletRadius">
              <option value="500">500m</option>
              <option value="1000" selected>1km</option>
              <option value="2000">2km</option>
              <option value="5000">5km</option>
            </select>
          </div>
          <div id="toiletResults" class="results-list">
            <p class="empty-message">장소를 선택하면 주변 화장실 정보가 표시됩니다</p>
          </div>
        </div>

        <!-- 후기 탭 -->
        <div id="reviewTab" class="tab-content">
          <div class="search-options">
            <input type="text" id="additionalKeyword" placeholder="추가 키워드 (예: 차박, 캠핑)">
            <button id="searchReviewBtn" class="btn-primary">검색</button>
          </div>

          <!-- 분석 요약 -->
          <div id="analysisSection" class="analysis-section hidden">
            <h4>📊 분석 요약</h4>
            <div id="analysisSummary" class="analysis-summary"></div>
            <div class="analysis-details">
              <div id="sentimentBadge" class="sentiment-badge"></div>
              <div id="keywordTags" class="keyword-tags"></div>
            </div>
          </div>

          <!-- 검색 결과 -->
          <div id="reviewResults" class="results-list">
            <p class="empty-message">장소를 선택하고 검색하면 블로그/카페 후기가 표시됩니다</p>
          </div>
        </div>

        <!-- 정보 탭 -->
        <div id="infoTab" class="tab-content">
          <div id="placeInfo" class="place-info">
            <p class="empty-message">장소를 선택하면 상세 정보가 표시됩니다</p>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- 설정 모달 -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>⚙️ API 설정</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Google Maps API Key</label>
          <input type="text" id="googleApiKey" placeholder="AIza...">
          <p class="help-text">Google Cloud Console에서 발급</p>
        </div>
        <div class="form-group">
          <label>네이버 Client ID</label>
          <input type="text" id="naverClientId" placeholder="클라이언트 ID">
        </div>
        <div class="form-group">
          <label>네이버 Client Secret</label>
          <input type="password" id="naverClientSecret" placeholder="클라이언트 시크릿">
          <p class="help-text">네이버 개발자센터에서 발급</p>
        </div>
        <div class="form-group">
          <label>Kakao REST API Key</label>
          <input type="text" id="kakaoApiKey" placeholder="REST API 키">
          <p class="help-text">주소→좌표 변환용 (Kakao Developers에서 발급)</p>
        </div>
      </div>
      <div class="modal-footer">
        <button id="saveSettingsBtn" class="btn-primary">저장</button>
      </div>
    </div>
  </div>

  <!-- API 키 안내 모달 -->
  <div id="apiGuideModal" class="modal hidden">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2>🔑 API 키 발급 안내</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="guide-section">
          <h3>1. Google Maps API Key</h3>
          <ol>
            <li><a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a> 접속</li>
            <li>프로젝트 생성 또는 선택</li>
            <li>"APIs & Services" > "Credentials" 이동</li>
            <li>"+ CREATE CREDENTIALS" > "API Key" 클릭</li>
            <li>"Maps JavaScript API" 활성화</li>
          </ol>
        </div>
        <div class="guide-section">
          <h3>2. 네이버 검색 API</h3>
          <ol>
            <li><a href="https://developers.naver.com" target="_blank">네이버 개발자센터</a> 접속</li>
            <li>로그인 후 "Application" > "애플리케이션 등록"</li>
            <li>사용 API에서 "검색" 선택</li>
            <li>Client ID와 Client Secret 복사</li>
          </ol>
        </div>
        <div class="guide-section">
          <h3>3. Kakao REST API Key (주소→좌표 변환)</h3>
          <ol>
            <li><a href="https://developers.kakao.com" target="_blank">Kakao Developers</a> 접속</li>
            <li>로그인 후 "내 애플리케이션" > "애플리케이션 추가"</li>
            <li>앱 생성 후 "앱 키" 메뉴에서 "REST API 키" 복사</li>
          </ol>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary modal-close-btn">닫기</button>
        <button id="goToSettingsBtn" class="btn-primary">설정으로 이동</button>
      </div>
    </div>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
